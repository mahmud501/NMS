<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

    <nav class="navbar">
        <div class="nav-left">
            <a href="/">NMS</a>
        </div>
        <div class="nav-menu-div">
            <ul class="nav-menu">
                <li class="nav-item"><a href="/dashboard">Dashboard</a></li>

                <li class="nav-item dropdown">
                    <a href="#">Devices
                        <img src="/static/images/dropdown-icon-1.svg">
                    </a>
                    <div class="dropdown-content">
                        <a href="/devices/all">All Devices</a>
                        <a href="/devices/up">Up Devices</a>
                        <a href="/devices/down">Down Devices</a>
                        {% if current_user.role_name in ['admin', 'operator'] %}
                        <a href="/devices/add">Add Device</a>
                        {% endif %}
                        {% if current_user.role_name == 'admin' %}
                        <a href="/device/delete">Delete Device</a>
                        {% endif %}
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a href="#">Alerts
                        <img src="/static/images/dropdown-icon-1.svg">
                    </a>
                    <div class="dropdown-content">
                        <a href="/alerts">All Alerts</a>
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a href="#">Administration
                        <img src="/static/images/dropdown-icon-1.svg">
                    </a>
                    <div class="dropdown-content">
                        {% if current_user.role_name == 'admin' %}
                        <a href="/users">Users</a>
                        {% endif %}
                        <a href="/alerts/thresholds">Alert Thresholds</a>
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a href="#">Reports
                        <img src="/static/images/dropdown-icon-1.svg">
                    </a>
                    <div class="dropdown-content">
                        <a href="/reports">Performance Report</a>
                        <a href="/reports/availability">Availability Report</a>
                    </div>
                </li>
            </ul>
        </div>

        <div class="nav-right">
            <ul class="nav-menu">
                <li class="nav-item dropdown">
                    <a href="#">Profile
                        <img src="/static/images/dropdown-icon-1.svg">
                    </a>
                    <div class="dropdown-content-right">
                        <a href="/profile">My Profile</a>
                        <a href="/logout">Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-messages-container">
                {% for category, message in messages %}
                    <div id="flash-message-float" class="flash-alert {{ category }}">
                        
                        <span class="flash-icon">
                            {% if category == 'error' %} ❌
                            {% elif category == 'warning' %}⚠️
                            {% else %}ⓘ{% endif %}
                        </span>
                        <span class="flash-text">{{ message }}</span>
                        <span class="flash-close" onclick="this.parentElement.remove()">x</span>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <div class="container">
        {% block content %}
        
        {% endblock %}
    </div>
</body>

<!-- <script>
document.addEventListener("DOMContentLoaded", function(){
    const flashes = document.querySelectorAll(".flash-alert");
    flashes.forEach(function(flash){
        setTimeout(function(){
            flash.style.opacity = "0.5";
            setTimeout(function(){
                flash.remove();
            },500);
        },8000);
    });
});     
</script> -->
</html>